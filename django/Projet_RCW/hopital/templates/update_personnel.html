<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Modifier Personnel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% load static %}
    <link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
    <link rel="stylesheet" href="{% static 'css/creer.css' %}">
</head>

<body>
    <div class="container">
        <header>
            <h1>
                <a href="#">
                    <img src="http://tfgms.com/sandbox/dailyui/logo-1.png" alt="Authentic Collection">
                </a>
            </h1>
        </header>
        <h1 class="text-center">Modifier Personnel</h1>

        {% if error_message %}
            <div class="alert alert-danger">{{ error_message }}</div>
        {% endif %}

        <form class="registration-form" method="POST">
            {% csrf_token %}
            <label class="col-one-half">
                <span class="label-text">Nom</span>
                <input type="text" name="name" value="{{ personnel.name }}">
            </label>
            <label class="col-one-half">
                <span class="label-text">Email</span>
                <input type="email" name="email" value="{{ personnel.email }}">
            </label>
            <label class="col-one-half">
                <span class="label-text">Téléphone</span>
                <input type="text" name="phone" value="{{ personnel.phone }}">
            </label>
            <label class="col-one-half">
                <span class="label-text">Adresse</span>
                <input type="text" name="address" value="{{ personnel.address }}">
            </label>
            <label class="col-one-half">
                <span class="label-text">Poste</span>
                <select name="poste">
                    <option value="Administration" {% if personnel.poste == 'Administration' %}selected{% endif %}>Administration</option>
                    <option value="Support technique" {% if personnel.poste == 'Support technique' %}selected{% endif %}>Support technique</option>
                    <option value="Services divers" {% if personnel.poste == 'Services divers' %}selected{% endif %}>Services divers</option>
                </select>
            </label>

            <div class="availability-section">
                <h3>Disponibilité</h3>
                {% for availability in personnel.availability %}
                    <div class="availability-row">
                        <label>
                            <span class="label-text">Jour</span>
                            <select name="day">
                                <option value="Monday" {% if availability.day == 'Monday' %}selected{% endif %}>Lundi</option>
                                <option value="Tuesday" {% if availability.day == 'Tuesday' %}selected{% endif %}>Mardi</option>
                                <option value="Wednesday" {% if availability.day == 'Wednesday' %}selected{% endif %}>Mercredi</option>
                                <option value="Thursday" {% if availability.day == 'Thursday' %}selected{% endif %}>Jeudi</option>
                                <option value="Friday" {% if availability.day == 'Friday' %}selected{% endif %}>Vendredi</option>
                                <option value="Saturday" {% if availability.day == 'Saturday' %}selected{% endif %}>Samedi</option>
                                <option value="Sunday" {% if availability.day == 'Sunday' %}selected{% endif %}>Dimanche</option>
                            </select>
                        </label>
                        <label>
                            <span class="label-text">Heure de début</span>
                            <select name="start_hour">
                                <option value="00:00" {% if "00:00" in availability.hours %}selected{% endif %}>00:00</option>
                                <option value="01:00" {% if "01:00" in availability.hours %}selected{% endif %}>01:00</option>
                                <option value="02:00" {% if "02:00" in availability.hours %}selected{% endif %}>02:00</option>
                                <option value="03:00" {% if "03:00" in availability.hours %}selected{% endif %}>03:00</option>
                                <option value="04:00" {% if "04:00" in availability.hours %}selected{% endif %}>04:00</option>
                                <option value="05:00" {% if "05:00" in availability.hours %}selected{% endif %}>05:00</option>
                                <option value="06:00" {% if "06:00" in availability.hours %}selected{% endif %}>06:00</option>
                                <option value="07:00" {% if "07:00" in availability.hours %}selected{% endif %}>07:00</option>
                                <option value="08:00" {% if "08:00" in availability.hours %}selected{% endif %}>08:00</option>
                                <option value="09:00" {% if "09:00" in availability.hours %}selected{% endif %}>09:00</option>
                                <option value="10:00" {% if "10:00" in availability.hours %}selected{% endif %}>10:00</option>
                                <option value="11:00" {% if "11:00" in availability.hours %}selected{% endif %}>11:00</option>
                                <option value="12:00" {% if "12:00" in availability.hours %}selected{% endif %}>12:00</option>
                                <option value="13:00" {% if "13:00" in availability.hours %}selected{% endif %}>13:00</option>
                                <option value="14:00" {% if "14:00" in availability.hours %}selected{% endif %}>14:00</option>
                                <option value="15:00" {% if "15:00" in availability.hours %}selected{% endif %}>15:00</option>
                                <option value="16:00" {% if "16:00" in availability.hours %}selected{% endif %}>16:00</option>
                                <option value="17:00" {% if "17:00" in availability.hours %}selected{% endif %}>17:00</option>
                                <option value="18:00" {% if "18:00" in availability.hours %}selected{% endif %}>18:00</option>
                                <option value="19:00" {% if "19:00" in availability.hours %}selected{% endif %}>19:00</option>
                                <option value="20:00" {% if "20:00" in availability.hours %}selected{% endif %}>20:00</option>
                                <option value="21:00" {% if "21:00" in availability.hours %}selected{% endif %}>21:00</option>
                                <option value="22:00" {% if "22:00" in availability.hours %}selected{% endif %}>22:00</option>
                                <option value="23:00" {% if "23:00" in availability.hours %}selected{% endif %}>23:00</option>
                            </select>
                        </label>
                        <label>
                            <span class="label-text">Heure de fin</span>
                            <select name="end_hour">
                                <option value="00:00" {% if "00:00" in availability.hours %}selected{% endif %}>00:00</option>
                                <option value="01:00" {% if "01:00" in availability.hours %}selected{% endif %}>01:00</option>
                                <option value="02:00" {% if "02:00" in availability.hours %}selected{% endif %}>02:00</option>
                                <option value="03:00" {% if "03:00" in availability.hours %}selected{% endif %}>03:00</option>
                                <option value="04:00" {% if "04:00" in availability.hours %}selected{% endif %}>04:00</option>
                                <option value="05:00" {% if "05:00" in availability.hours %}selected{% endif %}>05:00</option>
                                <option value="06:00" {% if "06:00" in availability.hours %}selected{% endif %}>06:00</option>
                                <option value="07:00" {% if "07:00" in availability.hours %}selected{% endif %}>07:00</option>
                                <option value="08:00" {% if "08:00" in availability.hours %}selected{% endif %}>08:00</option>
                                <option value="09:00" {% if "09:00" in availability.hours %}selected{% endif %}>09:00</option>
                                <option value="10:00" {% if "10:00" in availability.hours %}selected{% endif %}>10:00</option>
                                <option value="11:00" {% if "11:00" in availability.hours %}selected{% endif %}>11:00</option>
                                <option value="12:00" {% if "12:00" in availability.hours %}selected{% endif %}>12:00</option>
                                <option value="13:00" {% if "13:00" in availability.hours %}selected{% endif %}>13:00</option>
                                <option value="14:00" {% if "14:00" in availability.hours %}selected{% endif %}>14:00</option>
                                <option value="15:00" {% if "15:00" in availability.hours %}selected{% endif %}>15:00</option>
                                <option value="16:00" {% if "16:00" in availability.hours %}selected{% endif %}>16:00</option>
                                <option value="17:00" {% if "17:00" in availability.hours %}selected{% endif %}>17:00</option>
                                <option value="18:00" {% if "18:00" in availability.hours %}selected{% endif %}>18:00</option>
                                <option value="19:00" {% if "19:00" in availability.hours %}selected{% endif %}>19:00</option>
                                <option value="20:00" {% if "20:00" in availability.hours %}selected{% endif %}>20:00</option>
                                <option value="21:00" {% if "21:00" in availability.hours %}selected{% endif %}>21:00</option>
                                <option value="22:00" {% if "22:00" in availability.hours %}selected{% endif %}>22:00</option>
                                <option value="23:00" {% if "23:00" in availability.hours %}selected{% endif %}>23:00</option>
                            </select>
                        </label>
                    </div>
                {% endfor %}
                <button type="button" class="add-availability">Ajouter Disponibilité</button>
            </div>

            <div class="text-center">
                <button class="submit" name="register">Modifier</button>
            </div>
        </form>
    </div>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script>
        $(document).ready(function() {
            let availabilityIndex = 1;

            $('.add-availability').click(function() {
                var newAvailability = $('.availability-row:first').clone();
                newAvailability.find('select').each(function() {
                    var name = $(this).attr('name');
                    name = name.replace('[0]', '[' + availabilityIndex + ']');
                    $(this).attr('name', name);
                });
                newAvailability.find('select').val('');
                $('.availability-section').append(newAvailability);
                availabilityIndex++;
            });
        });
    </script>
</body>

</html>
